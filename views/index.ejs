

<!doctype html>
<html lang="en">

    <head>

		<!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <title></title>

        <!-- CSS -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500&display=swap">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
        <link rel="stylesheet" href="../css/jquery.mCustomScrollbar.min.css">
        <link rel="stylesheet" href="../css/animate.css">
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/media-queries.css">
        <link rel="stylesheet" href="../cssdash.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
        <style type="text/css">
            .chartBox{
                width: 600px;
                height: 500px;
            }
        </style>

        <!-- Favicon and touch icons -->
        <link rel="shortcut icon" href="../ico/favicon.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="../ico/apple-touch-icon-57-precomposed.png">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
        <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
      integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    </head>

    <body style="background-image: url('../img/backgrounds/4.jpg'); background-size: cover;
    background-repeat: no-repeat;">

		<!-- Wrapper -->
    	<div class="wrapper">

			<!-- Sidebar -->
      <nav class="sidebar">
				
        <!-- close sidebar menu -->
        <div class="dismiss">
          <i class="fas fa-arrow-left"></i>
        </div>
        
        <div class="logo">
          <h3><a href="/">Bootstrap 4 Template with Sidebar Menu</a></h3>
        </div>
        
        <ul class="list-unstyled menu-elements">
          <li>
            <a href="/"><i class="bi bi-bar-chart-line"></i>Dashboard</a>
          </li>
          <li>
            <a href="/blocs"><i class="bi bi-card-list"></i>Bloc</a>
          </li>
          <li>
            <a href="/salles"><i class="bi bi-card-list"></i>Salles</a>
            
          </li>
          <li>
            <a href="/creneau"><i class="bi bi-clock"></i>Creneau</a>
            
          </li>
          <li>
            <a href="/occupation"><i class="bi bi-bookmark-check"></i>Occupation</a>
            
        
          <li>
      <a href="#otherSections" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle" role="button" aria-controls="otherSections">
              <i class="fas fa-sync"></i>ADD
      </a>
        <ul class="collapse list-unstyled" id="otherSections">
              <li>
                <a href="/salles/add">ADD SALLES</a>
                
              </li>
              <li>
                <a href="/blocs/add">ADD BLOCS</a>
              </li>
              <li>
                <a href="/creneau/add">ADD CRENEAU</a>
              
              </li>
            </ul>
          </li>
        </ul>
        
        
        
        <div class="dark-light-buttons">
          <a class="btn btn-primary btn-customized-4 btn-customized-dark" href="#" role="button">Dark</a>
          <a class="btn btn-primary btn-customized-4 btn-customized-light" href="#" role="button">Light</a>
        </div>
      
      </nav>
			<!-- End sidebar -->
			
			<!-- Dark overlay -->
    		<div class="overlay"></div>

			<!-- Content -->
			<div class="content" >
                <header>
  
                    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
                      <div class="carousel-indicators">
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
                      </div>
                      <div class="carousel-inner">
                        <div class="carousel-item active" style="background-image: url('https://media-exp1.licdn.com/dms/image/C561BAQESE2JpCHE8tQ/company-background_10000/0/1559912502513?e=2159024400&v=beta&t=pvs1y1R6qHuHpk06_rcCcqcozX8IvWk7zUipOd7CzyA')">
                          <div class="carousel-caption">
                            <h5>Welcome To ENSAJ</h5>
                            <p>Here  you can see the occupation of ensaj salles</p>
                          </div>
                        </div>
                        <div class="carousel-item" style="background-image: url('https://www.kezakoo.com/sup/wp-content/uploads/2019/02/ENSA-JADIDA-compus.jpg')">
                          <div class="carousel-caption">
                            <h5>Welcome To ENSAJ</h5>
                            <p>Here  you can see the occupation of ensaj salles</p>
                          </div>
                        </div>
                        <div class="carousel-item" style="background-image: url('https://media-exp1.licdn.com/dms/image/C561BAQGRkUTFLqeG1g/company-background_10000/0/1531063888708?e=2159024400&v=beta&t=fr2YiUXNiE1rGEDDZIE05Ngh2xX8GTSxE0rhmRWAyxg')">
                          <div class="carousel-caption">
                            <h5>Welcome To ENSAJ</h5>
                            <p>Here  you can see the occupation of ensaj salles</p>
                          </div>
                        </div>
                      </div>
                      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                      </button>
                      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                      </button>
                    </div>
                  </header>
			
				<!-- open sidebar menu -->
				<a class="btn btn-primary btn-customized open-menu" href="#" role="button">
                    <i class="fas fa-align-left"></i> <span>Menu</span>
                </a>
			

                          <div class="container" >
                            <div class="container-fluid">
                                <div class="row">
                        
                                    <!-- Nombre des Etudiants Card Example -->
                                    <div class="col-xl-4 col-md-6 mb-4">
                                        <div class="card border-left-primary shadow h-100 py-2" style="background-color:#FEF0E5 ;">
                                            <div class="card-body">
                                                <div class="row no-gutters align-items-center">
                                                    <div class="col mr-2">
                                                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                            Blocs</div>
                                                        <div class="h5 mb-0 font-weight-bold text-gray-800 etudiantstats"><%= blocsNbr %></div>
                                                    </div>
                                                    <div class="col-auto">
                                                        <i class="fas fa-layer-group fa-2x text-gray-300"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                        
                                    <!-- Nombre des Professeurs Card Example -->
                                    <div class="col-xl-4 col-md-6 mb-4">
                                        <div class="card border-left-success shadow h-100 py-2"style="background-color:#FEF0E5 ;">
                                            <div class="card-body" >
                                                <div class="row no-gutters align-items-center" >
                                                    <div class="col mr-2">
                                                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                            Salles</div>
                                                        <div class="h5 mb-0 font-weight-bold text-gray-800 professeurstats"><%= sallesNbr %></div>
                                                    </div>
                                                    <div class="col-auto">
                                                        <i class="fas fa-qrcode fa-2x text-gray-300"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                        
                        
                                    <!-- Nombre des Agents de scolarité Card Example -->
                                    <div class="col-xl-4 col-md-6 mb-4">
                                        <div class="card border-left-info shadow h-100 py-2" style="background-color:#FEF0E5 ;">
                                            <div class="card-body">
                                                <div class="row no-gutters align-items-center">
                                                    <div class="col mr-2">
                                                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                            Créneaux</div>
                                                        <div class="h5 mb-0 font-weight-bold text-gray-800 agentexamenstats"><%= creneauxNbr %></div>
                                                    </div>
                                                    <div class="col-auto">
                                                        <i class="fas fa-clock fa-2x text-gray-300"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            <div class="content mt-3">
                              <div class="animated fadeIn">
                                <div class="row">
                            
                                  <div class="col-md-6" style="margin: auto;">
                                    <div class="card" style="width:400px;height:400px;border-radius: 20px;" >
                                      <div class="card-header">
                                        <strong class="card-title">Nombre d'occupation des salles</strong>
                                      </div>
                                      <div class="card-body" style="width:400px;height:400px ;background-color:#FEF0E5 ;">
                                          <div class="chatBox" style="width:400px;height:400px">
                                        <canvas id="myChart" style="width:400px;height:400px"></canvas>
                                    </div>
                                      </div>
                                    </div>
                                  </div>
                                 
                            
                            
                                </div>
                              </div><!-- .animated -->
                            </div><!-- .content -->
                            
                            </div>
                        
                        </div>

                          <script>

const ctx = document.getElementById('myChart').getContext('2d')
var array1 = []
var array2 = []

const showStatistiques = async () => {
  try {
    const { data: statistiques } = await axios.get('/dash')
    if (statistiques.length < 1) {
      return
    }
    const allStatistiques = statistiques.map((statistique) => {
      const { salle, nombreoccupations } = statistique
      array1.push(salle)
      array2.push(nombreoccupations)
    })
    const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: array1,

        datasets: [
          {
            label: 'nbr salles occup',
            data: array2,
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)',
            ],
            borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)',
            ],
            borderWidth: 1,
          },
        ],
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
            
          }
          
        },
        layout:{
            padding: 40 
        }
      },
    })
  } catch (error) {
    alert(error)
  }
}
showStatistiques()
                            </script>
                            

		       
        <!-- Javascript -->
		<script src="../js/jquery-3.3.1.min.js"></script>
		<script src="../js/jquery-migrate-3.0.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="..js/jquery.backstretch.min.js"></script>
        <script src="../js/wow.min.js"></script>
        <script src="../js/jquery.waypoints.min.js"></script>
        <script src="../js/jquery.mCustomScrollbar.concat.min.js"></script>
        <script src="../js/scripts.js"></script>
        <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
      integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
        
        
	</div>
    
  
  </body>
</html>